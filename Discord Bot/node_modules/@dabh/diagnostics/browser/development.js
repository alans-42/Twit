var create = require('@dabh/diagnostics/diagnostics');

/**
 * Create a new diagnostics logger.
 *
 * @param {String} namespace The namespace it should enable.
 * @param {Object} options Additional options.
 * @returns {Function} The logger.
 * @public
 */
var diagnostics = create(function dev(namespace, options) {
  options = options || {};
  options.namespace = namespace;
  options.prod = false;
  options.dev = true;

  if (!dev.enabled(namespace) && !(options.force || dev.force)) {
    return dev.nope(options);
  }

  return dev.yep(options);
});

//
// Configure the logger for the given environment.
//
diagnostics.modify(require('@dabh/diagnostics/modifiers/namespace'));
diagnostics.use(require('@dabh/diagnostics/adapters/localstorage'));
diagnostics.use(require('@dabh/diagnostics/adapters/hash'));
diagnostics.set(require('@dabh/diagnostics/logger/console'));

//
// Expose the diagnostics logger.
//
module.exports = diagnostics;
